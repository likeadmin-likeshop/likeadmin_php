import{L as x,y as R,x as U,W as h,s as L,A as N}from"./element-plus.32724f3c.js";import{d as I,a as S,b as q}from"./department.f0fbad61.js";import{P}from"./index.f5b35b1c.js";import{d as T,s as c,r as E,e as K,$ as M,o as f,c as O,U as l,L as t,K as W,R as $,a as _,u as j}from"./@vue.67e62321.js";const z={class:"edit-popup"},G=_("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C \u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D",-1),Z=T({__name:"edit",emits:["success","close"],setup(H,{expose:F,emit:p}){const m=c(),d=c(),i=E([]),n=E("add"),V=K(()=>n.value=="edit"?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8"),u=M({id:"",pid:"",name:"",leader:"",mobile:"",sort:0,status:1}),v={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",trigger:["change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:["blur"]}]},B=async()=>{const o=await I();i.value=o},D=async()=>{var o,e;await((o=m.value)==null?void 0:o.validate()),n.value=="edit"?await S(u):await q(u),(e=d.value)==null||e.close(),p("success")},b=(o="add")=>{var e;n.value=o,(e=d.value)==null||e.open()},A=o=>{for(const e in u)o[e]!=null&&o[e]!=null&&(u[e]=o[e])},C=()=>{p("close")};return B(),F({open:b,setFormData:A}),(o,e)=>{const k=x,s=R,r=U,w=h,y=L,g=N;return f(),O("div",z,[l(P,{ref_key:"popupRef",ref:d,title:j(V),async:!0,width:"550px",clickModalClose:!0,onConfirm:D,onClose:C},{default:t(()=>[l(g,{ref_key:"formRef",ref:m,model:u,"label-width":"84px",rules:v},{default:t(()=>[u.pid!==0?(f(),W(s,{key:0,label:"\u4E0A\u7EA7\u90E8\u95E8",prop:"pid"},{default:t(()=>[l(k,{class:"flex-1",modelValue:u.pid,"onUpdate:modelValue":e[0]||(e[0]=a=>u.pid=a),data:i.value,clearable:"","node-key":"id",props:{value:"id",label:"name"},"check-strictly":"","default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},null,8,["modelValue","data"])]),_:1})):$("",!0),l(s,{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{default:t(()=>[l(r,{modelValue:u.name,"onUpdate:modelValue":e[1]||(e[1]=a=>u.name=a),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u8D1F\u8D23\u4EBA",prop:"leader"},{default:t(()=>[l(r,{modelValue:u.leader,"onUpdate:modelValue":e[2]||(e[2]=a=>u.leader=a),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\u59D3\u540D"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"mobile"},{default:t(()=>[l(r,{modelValue:u.mobile,"onUpdate:modelValue":e[3]||(e[3]=a=>u.mobile=a),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u6392\u5E8F",prop:"sort"},{default:t(()=>[_("div",null,[l(w,{modelValue:u.sort,"onUpdate:modelValue":e[4]||(e[4]=a=>u.sort=a)},null,8,["modelValue"]),G])]),_:1}),l(s,{label:"\u90E8\u95E8\u72B6\u6001"},{default:t(()=>[l(y,{modelValue:u.status,"onUpdate:modelValue":e[5]||(e[5]=a=>u.status=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{Z as _};
