import{f as i}from"./index.4129398f.js";import{a as c,b as g,c as o}from"./wx_oa.a1bb30e5.js";import{s as h,r as l,a1 as d}from"./@vue.af680e04.js";const t=h(),a=l([]),n=l(0),S=d({name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]},{min:1,max:12,message:"\u957F\u5EA6\u9650\u523612\u4E2A\u5B57\u7B26",trigger:["blur","change"]}],menuType:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]}],visitType:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]}],url:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]},{pattern:/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,message:"\u8BF7\u8F93\u5165\u5408\u6CD5\u7684\u7F51\u5740\u94FE\u63A5",trigger:["blur","change"]}],appId:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]}],pagePath:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]}]}),y=s=>(s&&(t.value=s),{menuList:a,menuIndex:n,handleAddMenu:()=>{a.value.push({name:"\u83DC\u5355\u540D\u79F0",has_menu:!1,type:"view",url:"",appid:"",pagepath:"",sub_button:[]})},handleAddSubMenu:u=>{const e=n.value;if(a.value[e].sub_button.length>=5){i.msgError("\u5DF2\u6DFB\u52A0\u4E0A\u9650\uFF5E");return}a.value[e].sub_button.push(u)},handleEditSubMenu:(u,e)=>{const r=n.value;a.value[r].sub_button[e]=u},handleDelMenu:u=>{u!=0&&n.value--,a.value.splice(u,1)},handleDelSubMenu:(u,e)=>{a.value[u].sub_button.splice(e,1)},getOaMenuFunc:async()=>{try{a.value=await c()}catch(u){console.log("\u83B7\u53D6\u83DC\u5355=>",u)}},handleSave:async()=>{const u=t.value.value;for(let e=0;e<u.length;e++)try{await u[e].menuFormRef.validate()}catch{n.value=e;return}await g(a.value)},handlePublish:async()=>{const u=t.value.value;for(let e=0;e<u.length;e++)try{await u[e].menuFormRef.validate()}catch{n.value=e;return}await o(a.value)}});export{S as r,y as u};
